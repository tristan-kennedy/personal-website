---
import { Image } from "astro:assets";
import { getExperiments } from "../../lib/content/experiments";
import Tooltip from "../Tooltip";

const experiments = await getExperiments();
const featured = experiments.slice(0, 3);
---

<section id="experiments" class="section-shell section-grid">
  <h1 data-animate class="display-xl mb-4 md:col-start-1 md:col-end-5">
    Experiments & Ideas
  </h1>
  <h2
    data-animate
    class="mb-4 hidden md:col-start-9 md:col-end-11 md:block md:text-right"
  >
    [04]
  </h2>
  <a
    data-animate
    href="/experiments"
    class="h2 transition-colors transition-transform hover:translate-x-2 hover:text-accent md:col-span-full md:mb-32"
    >EXPLORE MORE â†’</a
  >
  <div
    data-animate-group
    class="grid grid-cols-1 gap-10 md:col-start-1 md:col-end-11 md:grid-cols-3"
  >
    {
      featured.map((experiment) => {
        return (
          <a
            data-animate-item
            href={experiment.url}
            class="group flex h-full flex-col gap-2"
          >
            <Tooltip client:load label={"READ MORE"} className="mb-4">
              <div class="aspect-square overflow-hidden">
                <Image
                  src={experiment.data.image}
                  alt={`${experiment.data.title} cover`}
                  class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
                />
              </div>
            </Tooltip>
            <p class="transition-colors group-hover:text-accent">
              {experiment.data.title}
            </p>
            <h2 class="uppercase">{experiment.data.tech?.join(" / ")}</h2>
          </a>
        );
      })
    }
  </div>
</section>
