---
import { Image } from "astro:assets";
import { getProjects } from "../../lib/content/projects";
import Tooltip from "../Tooltip";

const projects = await getProjects();
const featured = projects.slice(0, 2);
---

<section id="projects" class="section-shell section-grid">
  <h1 data-animate class="display-xl md:col-start-1 md:col-end-5 md:mb-6">
    Recent Projects
  </h1>

  <h2
    data-animate
    class="hidden md:block md:col-start-9 md:col-end-11 md:mb-6 md:text-right"
  >
    [02]
  </h2>
  <a
    data-animate
    href="/projects"
    class="h2 md:col-span-full md:mb-32 transition-colors transition-transform hover:translate-x-2 hover:text-accent"
    >VIEW ALL WORK â†’</a
  >
  <div data-animate-group class="md:col-start-1 md:col-end-11 grid grid-cols-1 gap-12">
    {
      featured.map((project) => {
        return (
          <div data-animate-item class="grid grid-cols-1 gap-6 md:grid-cols-3 md:gap-x-8">
            <a
              href={project.url}
              class="group col-span-full grid grid-cols-1 gap-6 md:grid-cols-3 md:gap-x-8"
            >
              <Tooltip
                client:load
                label={"READ MORE"}
                className="md:col-span-2 md:mb-6"
              >
                <div class="overflow-hidden">
                  <Image
                    src={project.data.image}
                    alt={`${project.data.title} cover`}
                    class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
                  />
                </div>
              </Tooltip>

              <div class="my-auto flex flex-col gap-y-2">
                <h3 class="transition-colors group-hover:text-accent">
                  {project.data.title}
                </h3>
                <h2 class="uppercase">{project.data.date}</h2>
                <p class="mb-6 md:mb-10">
                  {project.data.description.split(".")[0]}...
                </p>
                <h2 class="uppercase">{project.data.tech?.join(" / ")}</h2>
              </div>
            </a>
          </div>
        );
      })
    }
  </div>
</section>
