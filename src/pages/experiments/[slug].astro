---
import Layout from "../../layouts/Layout.astro";
import Menu from "../../components/menu/Menu";
import { Image } from "astro:assets";
import { getExperiments } from "../../lib/content/experiments";

export async function getStaticPaths() {
  const experiments = await getExperiments();
  return experiments.map((experiment) => ({
    params: { slug: experiment.slug },
    props: { experiment },
  }));
}

const { experiment } = Astro.props;
const { Content } = await experiment.render();
---

<Layout title={experiment.data.title}>
  <section class="mb-16 grid grid-cols-10 gap-x-6 py-8">
    <a
      class="h2 col-start-1 col-end-5 mb-12 transition-colors transition-transform hover:-translate-x-2 hover:text-accent"
      href="/experiments">‚Üê EXPERIMENTS</a
    >
    <header class="col-start-10 col-end-11 mb-12 flex items-center justify-end">
      <Menu client:load />
    </header>
    <div class="col-span-full grid grid-cols-10 gap-x-6 gap-y-4">
      <h1 class="col-start-1 col-end-7 text-7xl">{experiment.data.title}</h1>
      <div
        class="col-start-8 col-end-11 flex flex-col items-end gap-y-4 text-right"
      >
        <div>
          <h2>DATE</h2>
          <p>{experiment.data.date}</p>
        </div>
        {
          experiment.data.tech && (
            <div>
              <h2>TECH</h2>
              <p>{experiment.data.tech.join(" / ")}</p>
            </div>
          )
        }
      </div>
      <div class="col-span-full mt-10 overflow-hidden">
        <Image
          src={experiment.data.image}
          alt={`${experiment.data.title} cover`}
          class="h-full w-full object-cover"
        />
      </div>
      <div class="col-span-full mt-10 grid grid-cols-10 gap-x-6">
        <h2 class="col-start-1 col-end-3">DESCRIPTION</h2>
        <p class="col-start-7 col-end-11">
          {experiment.data.description}
        </p>
      </div>
    </div>
  </section>
  <article class="mdx pb-24">
    <Content />
  </article>
</Layout>
